CloudFlare.define("cloudflare/oracle",["cloudflare","cloudflare/loader","cloudflare/user","cloudflare/path","cloudflare/iterator","cloudflare/dom","cloudflare/json","cloudflare/utility","cloudflare/console","cloudflare/deferred","cloudflare/config"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){var a=j.defer();return k.oracle?b.ajax({url:"/cdn-cgi/async/cf/uri/"+k.oracle+".json",method:"GET",complete:function(b){try{b=g.parse(b)}catch(c){a.reject("JSON data was corrupt or invalid!")}a.resolve(b.top_static||[])},error:function(){a.reject("Error divining the list of precacheable resources!")}}):a.reject(new Error("Oracle configuration not specified!")),a.promise}function m(a){var c=j.defer(),d=function(){h.nextTick(function(){try{g.parentNode&&g.parentNode.removeChild(g)}catch(a){}}),c.resolve()},e=function(){f.addEventListener(g,"load",function(){d()},!0),f.addEventListener(g,"error",function(){d()},!0)},g;if(!/\.swf$|\.class$/i.test(a)){i.log("Pre-fetching the following resource: "+a);try{f.internetExplorer?(g=new Image,e(),g.src=a):(g=f.createElement("object"),g.data=a,g.width=b.height=0,g.style.position="absolute",g.style.left="-9999px",e(),document.body.appendChild(g))}catch(k){c.reject(k)}}return c.promise}function n(){l().then(function(a){var b=0;(function(){var d=arguments.callee;b===a.length?c.setCookie("CF_ORACLE","PRECACHED"):a[b]?m(a[b]).then(d,d):h.nextTick(function(){d()}),b++})()},function(a){i.error(a)})}return c.setCookie("CF_ORACLE",c.getCookie("CF_ORACLE")||"READY"),c.getCookie("CF_ORACLE")!=="PRECACHED"&&f.onLoad.then(n),{oracle:!0}})